{"remainingRequest":"C:\\senior-java-spring-web-master\\src\\main\\javascript\\iq\\node_modules\\thread-loader\\dist\\cjs.js!C:\\senior-java-spring-web-master\\src\\main\\javascript\\iq\\node_modules\\ts-loader\\index.js??ref--12-2!C:\\senior-java-spring-web-master\\src\\main\\javascript\\iq\\src\\services\\http-service.ts","dependencies":[{"path":"C:\\senior-java-spring-web-master\\src\\main\\javascript\\iq\\src\\services\\http-service.ts","mtime":1589012795492},{"path":"C:\\senior-java-spring-web-master\\src\\main\\javascript\\iq\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\senior-java-spring-web-master\\src\\main\\javascript\\iq\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\senior-java-spring-web-master\\src\\main\\javascript\\iq\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { CustomError } from '@/services/errors';\r\nvar UnknownServerError = /** @class */ (function (_super) {\r\n    __extends(UnknownServerError, _super);\r\n    function UnknownServerError() {\r\n        return _super.call(this, 'Unknown Error') || this;\r\n    }\r\n    return UnknownServerError;\r\n}(CustomError));\r\nexport { UnknownServerError };\r\nvar NetworkError = /** @class */ (function (_super) {\r\n    __extends(NetworkError, _super);\r\n    function NetworkError() {\r\n        return _super.call(this, 'Network Error') || this;\r\n    }\r\n    return NetworkError;\r\n}(CustomError));\r\nexport { NetworkError };\r\nvar NotFoundError = /** @class */ (function (_super) {\r\n    __extends(NotFoundError, _super);\r\n    function NotFoundError() {\r\n        return _super.call(this, 'Not Found') || this;\r\n    }\r\n    return NotFoundError;\r\n}(CustomError));\r\nexport { NotFoundError };\r\nvar InternalServerError = /** @class */ (function (_super) {\r\n    __extends(InternalServerError, _super);\r\n    function InternalServerError() {\r\n        return _super.call(this, 'Internal Server Error') || this;\r\n    }\r\n    return InternalServerError;\r\n}(CustomError));\r\nexport { InternalServerError };\r\nvar IqAppError = /** @class */ (function (_super) {\r\n    __extends(IqAppError, _super);\r\n    function IqAppError(serverResponse, errorResponse) {\r\n        var _this = _super.call(this, serverResponse.statusText) || this;\r\n        _this.type = errorResponse.type;\r\n        _this.key = errorResponse.key;\r\n        _this.params = errorResponse.params;\r\n        _this.data = errorResponse.data;\r\n        return _this;\r\n    }\r\n    return IqAppError;\r\n}(CustomError));\r\nexport { IqAppError };\r\nvar FetchHttpService = /** @class */ (function () {\r\n    function FetchHttpService() {\r\n    }\r\n    FetchHttpService.prototype.get = function (path) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.doRequest('GET', path, null)];\r\n            });\r\n        });\r\n    };\r\n    FetchHttpService.prototype.post = function (path, body) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.doRequest('POST', path, body)];\r\n            });\r\n        });\r\n    };\r\n    FetchHttpService.prototype.put = function (path, body) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.doRequest('PUT', path, body)];\r\n            });\r\n        });\r\n    };\r\n    FetchHttpService.prototype.delete = function (path, body) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.doRequest('DELETE', path, body)];\r\n            });\r\n        });\r\n    };\r\n    FetchHttpService.prototype.head = function (path) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.doRequest('HEAD', path, null)];\r\n            });\r\n        });\r\n    };\r\n    FetchHttpService.prototype.doRequest = function (method, path, body) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, fetch(path, this.getRequestInitData(method, body))];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        e_1 = _a.sent();\r\n                        throw new NetworkError(); // Csak ha a szerver nem is érhető el (TCP error, protocol error)\r\n                    case 3: return [2 /*return*/, this.handleResponse(response)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FetchHttpService.prototype.getRequestInitData = function (method, body) {\r\n        var init = {\r\n            method: method,\r\n        };\r\n        var headers = new Headers();\r\n        headers.set('X-Requested-With', 'IqApp');\r\n        if (body) {\r\n            init.body = JSON.stringify(body);\r\n            headers.set('Content-Type', 'application/json');\r\n        }\r\n        init.headers = headers;\r\n        init.credentials = 'same-origin';\r\n        return init;\r\n    };\r\n    FetchHttpService.prototype.handleResponse = function (response) {\r\n        return __awaiter(this, void 0, Promise, function () {\r\n            var errorData, e_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(response.status < 200 || response.status >= 400)) return [3 /*break*/, 5];\r\n                        if (response.status === 404) {\r\n                            throw new NotFoundError();\r\n                        }\r\n                        errorData = void 0;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, response.json()];\r\n                    case 2:\r\n                        errorData = _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_2 = _a.sent();\r\n                        throw new UnknownServerError();\r\n                    case 4:\r\n                        if (errorData && errorData.type) {\r\n                            if (errorData.type === 'internal_server_error') {\r\n                                throw new InternalServerError();\r\n                            }\r\n                            else {\r\n                                throw new IqAppError(response, errorData);\r\n                            }\r\n                        }\r\n                        else {\r\n                            throw new UnknownServerError();\r\n                        }\r\n                        _a.label = 5;\r\n                    case 5: return [2 /*return*/, response.json()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return FetchHttpService;\r\n}());\r\nexport { FetchHttpService };\r\n",{"version":3,"file":"C:\\senior-java-spring-web-master\\src\\main\\javascript\\iq\\src\\services\\http-service.ts","sourceRoot":"","sources":["C:\\senior-java-spring-web-master\\src\\main\\javascript\\iq\\src\\services\\http-service.ts"],"names":[],"mappings":"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","sourcesContent":["import {CustomError} from '@/services/errors';\n\nexport interface IqAppErrorErrorResponse<T> {\n\ttype: 'internal_server_error' | string;\n\tkey?: string;\n\tparams?: {\n\t\t[key: string]: string,\n\t};\n\tdata?: T;\n}\n\nexport interface HttpService {\n\tget(path: string): Promise<any>;\n\n\tpost(path: string, body?: any): Promise<any>;\n\n\tput(path: string, body?: any): Promise<any>;\n\n\tdelete(path: string, body?: any): Promise<any>;\n\n\thead(path: string): Promise<any>;\n}\n\nexport class UnknownServerError extends CustomError {\n\tconstructor() {\n\t\tsuper('Unknown Error');\n\t}\n}\n\nexport class NetworkError extends CustomError {\n\tconstructor() {\n\t\tsuper('Network Error');\n\t}\n}\n\nexport class NotFoundError extends CustomError {\n\tconstructor() {\n\t\tsuper('Not Found');\n\t}\n}\n\nexport class InternalServerError extends CustomError {\n\tconstructor() {\n\t\tsuper('Internal Server Error');\n\t}\n}\n\nexport class IqAppError<T> extends CustomError implements IqAppErrorErrorResponse<T> {\n\tpublic readonly type: string;\n\tpublic readonly key?: string;\n\tpublic readonly params?: { [key: string]: string; };\n\tpublic readonly data?: T;\n\n\tconstructor(serverResponse: Response, errorResponse: IqAppErrorErrorResponse<T>) {\n\t\tsuper(serverResponse.statusText);\n\t\tthis.type = errorResponse.type;\n\t\tthis.key = errorResponse.key;\n\t\tthis.params = errorResponse.params;\n\t\tthis.data = errorResponse.data;\n\t}\n}\n\nexport class FetchHttpService implements HttpService {\n\n\tpublic async get(path: string) {\n\t\treturn this.doRequest('GET', path, null);\n\t}\n\n\tpublic async post(path: string, body?: any) {\n\t\treturn this.doRequest('POST', path, body);\n\t}\n\n\tpublic async put(path: string, body?: any) {\n\t\treturn this.doRequest('PUT', path, body);\n\t}\n\n\tpublic async delete(path: string, body?: any) {\n\t\treturn this.doRequest('DELETE', path, body);\n\t}\n\n\tpublic async head(path: string) {\n\t\treturn this.doRequest('HEAD', path, null);\n\t}\n\n\tprivate async doRequest(method: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'HEAD', path: string, body?: any) {\n\t\tlet response;\n\t\ttry {\n\t\t\tresponse = await fetch(path, this.getRequestInitData(method, body));\n\t\t} catch (e) {\n\t\t\tthrow new NetworkError(); // Csak ha a szerver nem is érhető el (TCP error, protocol error)\n\t\t}\n\t\treturn this.handleResponse(response);\n\t}\n\n\tprivate getRequestInitData(method: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'HEAD', body?: any): RequestInit {\n\t\tconst init: RequestInit = {\n\t\t\tmethod,\n\t\t};\n\n\t\tconst headers = new Headers();\n\n\t\theaders.set('X-Requested-With', 'IqApp');\n\n\t\tif (body) {\n\t\t\tinit.body = JSON.stringify(body);\n\t\t\theaders.set('Content-Type', 'application/json');\n\t\t}\n\n\t\tinit.headers = headers;\n\t\tinit.credentials = 'same-origin';\n\n\t\treturn init;\n\t}\n\n\tprivate async handleResponse(response: Response): Promise<any> {\n\t\t// TODO handle all status codes\n\t\tif (response.status < 200 || response.status >= 400) {\n\t\t\tif (response.status === 404) {\n\t\t\t\tthrow new NotFoundError();\n\t\t\t}\n\n\t\t\tlet errorData: IqAppErrorErrorResponse<any>;\n\n\t\t\ttry {\n\t\t\t\terrorData = await response.json();\n\t\t\t} catch (e) {\n\t\t\t\tthrow new UnknownServerError();\n\t\t\t}\n\n\t\t\tif (errorData && errorData.type) {\n\t\t\t\tif (errorData.type === 'internal_server_error') {\n\t\t\t\t\tthrow new InternalServerError();\n\t\t\t\t} else {\n\t\t\t\t\tthrow new IqAppError(response, errorData);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new UnknownServerError();\n\t\t\t}\n\n\t\t}\n\n\t\treturn response.json();\n\t}\n\n}\n"]}]}